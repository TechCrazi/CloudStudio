# CloudStudio minimal bootstrap environment
# Most runtime integration/module settings are managed in Admin -> App config
# and stored encrypted in the database.

# Core app
CLOUDSTUDIO_PORT=9090
CLOUDSTUDIO_SECRET_KEY=change-this-to-a-long-random-secret
CLOUDSTUDIO_DB_FILE=./data/cloudstudio.db
CLOUDSTUDIO_SINGLE_ENV=true

# Bootstrap auth (first admin account)
APP_AUTH_USERS=admin:ChangeMe123
# Optional: mark additional usernames as admin (comma-separated)
# APP_ADMIN_USERS=admin

# Optional bootstrap branding (can be changed in Admin -> App config)
CLOUDSTUDIO_BRAND_LOGIN=CloudStudio|CS
CLOUDSTUDIO_BRAND_MAIN=CloudStudio|CS

# Optional auth/session tuning
CLOUDSTUDIO_SESSION_TTL_MS=604800000
AUTH_SESSION_TTL_MS=604800000
AUTH_STATE_MAX_BYTES=2097152

# Optional DB backup env fallback (env wins over Admin -> Backup UI)
DB_BACKUP_ENABLED=false
DB_BACKUP_BUCKET=
DB_BACKUP_PREFIX=cloudstudio-db-backups
DB_BACKUP_REGION=us-east-1
DB_BACKUP_ENDPOINT=https://s3.wasabisys.com
DB_BACKUP_ACCESS_KEY_ID=
DB_BACKUP_SECRET_ACCESS_KEY=
DB_BACKUP_SESSION_TOKEN=
DB_BACKUP_FORCE_PATH_STYLE=false
DB_BACKUP_INTERVAL_MS=3600000
DB_BACKUP_RUN_ON_STARTUP=true
DB_BACKUP_RETENTION_DAYS=15
DB_BACKUP_APPLY_LIFECYCLE=true
DB_BACKUP_LIFECYCLE_RULE_ID=cloudstudio-db-backup-retention
DB_BACKUP_TMP_DIR=./data/tmp-backups
DB_BACKUP_QUEUE_DIR=./data/tmp-backups/queue
DB_BACKUP_COMPRESS=true
DB_BACKUP_COMPRESSION_LEVEL=6
DB_BACKUP_VERIFY_QUICK_CHECK=true
DB_BACKUP_UPLOAD_MANIFEST=true
DB_BACKUP_RETRY_BATCH_SIZE=3
DB_BACKUP_MAX_QUEUED_FILES=336

# Optional fallback aliases used by DB backup when DB_BACKUP_* keys are not set
WASABI_ACCESS_KEY=
WASABI_SECRET_KEY=
WASABI_REGION=us-east-1
WASABI_S3_ENDPOINT=https://s3.wasabisys.com

# Optional billing env bootstrap for SendGrid (can also be added in Vendor onboarding)
SENDGRID_BILLING_API_KEY=
SENDGRID_BILLING_ENDPOINT=https://api.sendgrid.com/v3/billing/invoices
SENDGRID_BILLING_ACCOUNT_ID=
SENDGRID_BILLING_ACCOUNT_LABEL=
SENDGRID_BILLING_MONTH_OFFSET=1
SENDGRID_BILLING_CURRENCY=USD
# SENDGRID_BILLING_ACCOUNTS_JSON=[{"accountId":"primary","displayName":"Primary","apiKey":"SG.x","billingEndpoint":"https://api.sendgrid.com/v3/billing/invoices"}]

# Optional billing env bootstrap for Grafana-Cloud (can also be added in Vendor onboarding)
GRAFANA_CLOUD_ORG_SLUG=
GRAFANA_CLOUD_ACCESS_POLICY_TOKEN=
GRAFANA_CLOUD_API_BASE_URL=https://grafana.com
GRAFANA_CLOUD_CURRENCY=USD
GRAFANA_CLOUD_BILLING_MODEL=flex
GRAFANA_CLOUD_FLEX_COMMIT_ENABLED=true
GRAFANA_CLOUD_FLEX_COMMIT_AMOUNT=
GRAFANA_CLOUD_FLEX_COMMIT_CURRENCY=USD
GRAFANA_CLOUD_FLEX_COMMIT_START_DATE=
GRAFANA_CLOUD_FLEX_COMMIT_YEARS=3
GRAFANA_CLOUD_FLEX_COMMIT_REPORTING_MODE=amortized
GRAFANA_CLOUD_FLEX_COMMIT_AUTO_RENEW=true
GRAFANA_CLOUD_INGEST_SYNC_ENABLED=true
GRAFANA_CLOUD_INGEST_SYNC_INTERVAL_MS=86400000
GRAFANA_CLOUD_INGEST_LOOKBACK_MONTHS=2
GRAFANA_CLOUD_INGEST_SYNC_RUN_ON_STARTUP=true
GRAFANA_CLOUD_INGEST_STARTUP_DELAY_MS=15000
# GRAFANA_CLOUD_ACCOUNTS_JSON=[{"accountId":"grafana-primary","displayName":"Grafana Prod","orgSlug":"acme","accessPolicyToken":"glc_x","apiBaseUrl":"https://grafana.com","billingModel":"flex","flexCommitEnabled":true,"flexCommitAmount":120000,"flexCommitStartDate":"2026-01-01","flexCommitYears":3,"flexCommitReportingMode":"amortized"}]

# Optional CheckMK firewall/VPN monitoring (can also be set in Admin -> App config env overrides)
CHECKMK_ENABLED=true
CHECKMK_BASE_URL=https://checkmk.nt.lkdatacenter.com/cmkordenterprise/check_mk/api/1.0
CHECKMK_API_KEY=
# CHECKMK_AUTH_SCHEME=automation   # automation | bearer | raw
CHECKMK_FIREWALL_HOSTS=FW10,FW11,FW3
CHECKMK_SYNC_INTERVAL_MS=300000
CHECKMK_SYNC_RUN_ON_STARTUP=true
CHECKMK_SYNC_STARTUP_DELAY_MS=1500
CHECKMK_TIMEOUT_MS=45000
# Optional regex to limit services pulled from discovery (example: VPN only)
# CHECKMK_SERVICE_FILTER_REGEX=VPN|Tunnel

# Cloudflare Access headers for CheckMK (optional unless your CheckMK URL is behind Cloudflare Access)
CLOUDFLARE_ACCESS_CLIENT_ID=
CLOUDFLARE_ACCESS_CLIENT_SECRET=
