# Unified CloudStudio environment
# Single file for core + storage + pricing + ip-address + billing + tag + cloud-metrics modules

# CloudStudio Core
PORT=9090
CLOUDSTUDIO_PORT=9090
CLOUDSTUDIO_SECRET_KEY=change-this-to-a-long-random-secret
CLOUDSTUDIO_DB_FILE=./data/cloudstudio.db
CLOUDSTUDIO_SINGLE_ENV=true

# Auth + Login
NODE_ENV=development
APP_AUTH_USERS=admin:ChangeMe123
APP_ADMIN_USERS=admin
APP_LOGIN_USER=
APP_LOGIN_PASSWORD=
# Branding (format: Company Name|INITIALS or JSON: {"name":"Company Name","initials":"CN"})
CLOUDSTUDIO_BRAND_LOGIN=CloudStudio|CS
CLOUDSTUDIO_BRAND_MAIN=CloudStudio|CS
CLOUDSTUDIO_SESSION_TTL_MS=604800000
AUTH_SESSION_TTL_MS=604800000
AUTH_STATE_MAX_BYTES=2097152

# Pricing Module Cache
PRICING_CACHE_WARMUP=true
PRICING_CACHE_CONCURRENCY=4
PRICING_CACHE_REFRESH_INTERVAL_MS=1800000

# Cloud Pricing API Credentials
AWS_PROFILE=default
AWS_SDK_LOAD_CONFIG=1
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
GCP_PRICING_API_KEY=
GCP_API_KEY=
GOOGLE_API_KEY=

# Azure Inventory Credentials
AZURE_CLIENT_ID=your-app-registration-client-id
AZURE_CLIENT_SECRET=your-app-registration-client-secret
AZURE_TENANT_ID=your-tenant-id-guid

# Proxy
HTTPS_PROXY=
HTTP_PROXY=

# Storage Sync + Logging
CACHE_TTL_MINUTES=360
SECURITY_CACHE_TTL_MINUTES=720
METRICS_CACHE_TTL_MINUTES=60
AZURE_METRICS_SYNC_INTERVAL_HOURS=12
ACCOUNT_SYNC_CONCURRENCY=2
CONTAINER_SYNC_CONCURRENCY=2
UI_PULL_ALL_CONCURRENCY=2
PULL_ALL_JOB_HISTORY_LIMIT=
LOG_ENABLE_DEBUG=false
LOG_ENABLE_INFO=true
LOG_ENABLE_WARN=true
LOG_ENABLE_ERROR=true
LOG_HTTP_REQUESTS=true
LOG_HTTP_DEBUG=false
LOG_JSON=false
LOG_INCLUDE_TIMESTAMP=true
LOG_MAX_VALUE_LENGTH=500

# Azure API Throttle
AZURE_API_MAX_CONCURRENCY=4
AZURE_API_MIN_INTERVAL_MS=75
AZURE_API_MAX_RETRIES=5
AZURE_API_BASE_BACKOFF_MS=500
AZURE_API_MAX_BACKOFF_MS=15000

# Azure Pricing Assumptions (Storage)
PRICING_SYNC_INTERVAL_HOURS=24
PRICING_ARM_REGION_NAME=eastus
PRICING_STORAGE_PRODUCT_NAME=General Block Blob v2
PRICING_STORAGE_SKU_NAME=Hot LRS
PRICING_EGRESS_PRODUCT_NAME=Rtn Preference: MGN
PRICING_CURRENCY=USD
PRICING_REGION_LABEL=US East
PRICING_SOURCE_URL=https://prices.azure.com/api/retail/prices
PRICING_AS_OF_DATE=2026-02-13
PRICING_BYTES_PER_GB=1000000000
PRICING_DAYS_IN_MONTH=30
PRICING_STORAGE_HOT_LRS_TIER1_GB_MONTH=0.0208
PRICING_STORAGE_HOT_LRS_TIER2_GB_MONTH=0.019968
PRICING_STORAGE_HOT_LRS_TIER3_GB_MONTH=0.019136
PRICING_EGRESS_TIER0_GB=0
PRICING_EGRESS_TIER1_GB=0.087
PRICING_EGRESS_TIER2_GB=0.083
PRICING_EGRESS_TIER3_GB=0.07
PRICING_EGRESS_TIER4_GB=0.05
PRICING_EGRESS_TIER5_GB=0.05
PRICING_INGRESS_GB=0
PRICING_TRANSACTION_UNIT_SIZE=10000
PRICING_TRANSACTION_UNIT_PRICE=0.004
PRICING_TRANSACTION_LABEL=Hot Read/All Other Ops

# AWS Storage Accounts + Sync
AWS_ACCOUNTS_JSON=
# Optional: accountId/displayName from AWS_ACCOUNTS_JSON used by pricing API requests.
AWS_PRICING_ACCOUNT_ID=
AWS_DEFAULT_ACCOUNT_ID=aws-default
AWS_DEFAULT_ACCOUNT_LABEL=AWS
AWS_DEFAULT_ACCESS_KEY_ID=
AWS_DEFAULT_SECRET_ACCESS_KEY=
AWS_DEFAULT_SESSION_TOKEN=
AWS_DEFAULT_REGION=us-east-1
AWS_DEFAULT_CLOUDWATCH_REGION=us-east-1
AWS_DEFAULT_EFS_REGIONS=us-east-1
AWS_DEFAULT_S3_ENDPOINT=
AWS_DEFAULT_FORCE_PATH_STYLE=false
AWS_DEFAULT_REQUEST_METRICS_ENABLED=false
AWS_SYNC_INTERVAL_HOURS=24
AWS_CACHE_TTL_HOURS=24
AWS_ACCOUNT_SYNC_CONCURRENCY=2
AWS_BUCKET_SYNC_CONCURRENCY=4
AWS_API_MAX_CONCURRENCY=4
AWS_API_MIN_INTERVAL_MS=100
AWS_API_MAX_RETRIES=4
AWS_DEEP_SCAN_DEFAULT=false
AWS_REQUEST_METRICS_DEFAULT=false
AWS_SECURITY_SCAN_DEFAULT=false
AWS_DEEP_SCAN_MAX_PAGES_PER_BUCKET=0

# AWS Pricing Assumptions (Storage)
AWS_PRICING_CURRENCY=USD
AWS_PRICING_REGION_LABEL=US East (N. Virginia)
AWS_PRICING_SOURCE_URL=https://aws.amazon.com/s3/pricing/
AWS_PRICING_AS_OF_DATE=2026-02-17
AWS_PRICING_BYTES_PER_GB=1073741824
AWS_PRICING_DAYS_IN_MONTH=30
AWS_PRICING_S3_STANDARD_GB_MONTH=0.023
AWS_PRICING_S3_EGRESS_GB=0.09
AWS_PRICING_S3_EGRESS_FREE_GB=0
AWS_PRICING_S3_REQUEST_UNIT_SIZE=1000
AWS_PRICING_S3_REQUEST_UNIT_PRICE=0.0004
AWS_PRICING_S3_REQUEST_LABEL=All requests (blended estimate)
AWS_PRICING_EFS_STANDARD_GB_MONTH=0.3

# Wasabi Accounts + Sync
WASABI_ACCOUNTS_JSON=
WASABI_ACCOUNT_ID=wasabi-default
WASABI_ACCOUNT_LABEL=Wasabi
WASABI_ACCESS_KEY=
WASABI_SECRET_KEY=
WASABI_REGION=us-east-1
WASABI_S3_ENDPOINT=https://s3.wasabisys.com
WASABI_STATS_ENDPOINT=https://stats.wasabisys.com
WASABI_SYNC_INTERVAL_HOURS=24
WASABI_CACHE_TTL_HOURS=24
WASABI_ACCOUNT_SYNC_CONCURRENCY=2
WASABI_BUCKET_SYNC_CONCURRENCY=4
WASABI_API_MAX_CONCURRENCY=3
WASABI_API_MIN_INTERVAL_MS=120
WASABI_API_MAX_RETRIES=4
WASABI_API_BASE_BACKOFF_MS=400
WASABI_API_MAX_BACKOFF_MS=8000

# Wasabi WACM Billing (WASABI-WACM provider)
WASABI_WACM_ENDPOINT=https://api.wacm.wasabisys.com/api/v1/invoices
WASABI_WACM_USERNAME=
WASABI_WACM_API_KEY=
WASABI_WACM_PAGE_SIZE=100
WASABI_WACM_MAX_PAGES=200
WASABI_WACM_CURRENCY=USD

# Wasabi Main Billing (WASABI-MAIN provider, usage-based API pull)
WASABI_MAIN_ACCOUNTS_JSON=
WASABI_MAIN_ACCOUNT_ID=
WASABI_MAIN_ACCOUNT_LABEL=Wasabi Main
WASABI_MAIN_WACM_USERNAME=
WASABI_MAIN_WACM_API_KEY=
WASABI_MAIN_USAGE_ENDPOINT=https://api.wacm.wasabisys.com/api/v1/usages
WASABI_MAIN_CONTROL_USAGE_ENDPOINT=https://api.wacm.wasabisys.com/api/v1/control-accounts/usages
WASABI_MAIN_PAGE_SIZE=100
WASABI_MAIN_MAX_PAGES=200
WASABI_MAIN_INCLUDE_ALL_ACCOUNTS=true
WASABI_MAIN_INCLUDE_SUB_ACCOUNTS=false
WASABI_MAIN_CURRENCY=USD
WASABI_MAIN_DAYS_IN_MONTH=30
WASABI_MAIN_ACTIVE_STORAGE_TB_MONTH=9
WASABI_MAIN_DELETED_STORAGE_TB_MONTH=9
WASABI_MAIN_MIN_BILLABLE_TB=0
WASABI_MAIN_API_CALLS_PER_MILLION=0
WASABI_MAIN_INGRESS_TB_COST=0
WASABI_MAIN_EGRESS_TB_COST=0

# Wasabi Pricing Assumptions
WASABI_PRICING_SYNC_INTERVAL_HOURS=24
WASABI_PRICING_SOURCE_URL=https://wasabi.com/pricing/faq
WASABI_PRICING_CURRENCY=USD
WASABI_PRICING_AS_OF_DATE=2026-02-13
WASABI_PRICING_BYTES_PER_TB=1099511627776
WASABI_PRICING_DAYS_IN_MONTH=30
WASABI_PRICING_STORAGE_TB_MONTH=9
WASABI_PRICING_MIN_BILLABLE_TB=1

# VSAx Accounts + Sync
VSAX_BASE_URL=
VSAX_API_TOKEN_ID=
VSAX_API_TOKEN_SECRET=
VSAX_SERVER_URL=
VSAX_TOKEN_ID=
VSAX_TOKEN_SECRET=
VSAX_INCLUDE=Disks
VSAX_GROUPS=
VSAX_GROUP_FILTERS=
VSAX_DISK_VALUE_UNIT=kb
VSAX_ASSET_FILTER=
VSAX_PAGE_SIZE=100
VSAX_MAX_PAGES=500
# Preferred over VSAX_SYNC_INTERVAL_HOURS. Set 1 for 1-minute sync.
VSAX_SYNC_INTERVAL_MINUTES=
VSAX_SYNC_INTERVAL_HOURS=24
VSAX_CACHE_TTL_HOURS=24
VSAX_GROUP_SYNC_CONCURRENCY=1
VSAX_API_MAX_CONCURRENCY=2
VSAX_API_MIN_INTERVAL_MS=150
VSAX_API_MAX_RETRIES=4

# VSAx Pricing Assumptions
VSAX_PRICING_CURRENCY=USD
VSAX_PRICING_SOURCE_URL=https://www.kaseya.com/pricing/
VSAX_PRICING_AS_OF_DATE=2026-02-17
VSAX_PRICING_BYTES_PER_TB=1099511627776
VSAX_PRICING_DAYS_IN_MONTH=30
VSAX_PRICING_STORAGE_TB_MONTH=130


# Rackspace Accounts + Sync
RACKSPACE_BASE_URL=
RACKSPACE_BILLING_BASE_URL=https://billing.api.rackspacecloud.com
RACKSPACE_IDENTITY_URL=https://identity.api.rackspacecloud.com/v2.0/tokens
RACKSPACE_API_KEY=
RACKSPACE_USERNAME=
RACKSPACE_ACCOUNT_ID=
RACKSPACE_ACCOUNT_LABEL=
RACKSPACE_ACCOUNTS_JSON=
RACKSPACE_REGION=
RACKSPACE_SYNC_INTERVAL_HOURS=24
RACKSPACE_CACHE_TTL_HOURS=24
RACKSPACE_ACCOUNT_SYNC_CONCURRENCY=2
RACKSPACE_CONTAINER_SYNC_CONCURRENCY=4
RACKSPACE_API_MAX_CONCURRENCY=3
RACKSPACE_API_MIN_INTERVAL_MS=120
RACKSPACE_API_MAX_RETRIES=4
RACKSPACE_API_BASE_BACKOFF_MS=400
RACKSPACE_API_MAX_BACKOFF_MS=8000

# Billing auto-sync (missing-only mode)
BILLING_AUTO_SYNC_ENABLED=true
BILLING_AUTO_SYNC_INTERVAL_MS=86400000
BILLING_AUTO_SYNC_RUN_ON_STARTUP=true
BILLING_AUTO_SYNC_ONLY_MISSING=true
BILLING_AUTO_SYNC_LOOKBACK_MONTHS=24
BILLING_AUTO_SYNC_MISSING_DELAY_MS=1200

# Cloud metrics sync (latest snapshot only, no historical retention)
CLOUD_METRICS_SYNC_ENABLED=true
CLOUD_METRICS_SYNC_INTERVAL_MS=300000
CLOUD_METRICS_SYNC_RUN_ON_STARTUP=true
CLOUD_METRICS_SYNC_STARTUP_DELAY_MS=15000
CLOUD_METRICS_AZURE=true
CLOUD_METRICS_AWS=true
CLOUD_METRICS_RACKSPACE=true
CLOUD_METRICS_AZURE_CONCURRENCY=6
CLOUD_METRICS_AZURE_MAX_RESOURCES=5000
CLOUD_METRICS_AZURE_TIMEOUT_MS=30000
CLOUD_METRICS_AZURE_MAX_RETRIES=4
CLOUD_METRICS_AZURE_LOOKBACK_MINUTES=15
CLOUD_METRICS_AZURE_METRIC_BATCH_SIZE=20
CLOUD_METRICS_AZURE_METRIC_BATCH_DELAY_MS=0
CLOUD_METRICS_AWS_CONCURRENCY=6
CLOUD_METRICS_AWS_MAX_RETRIES=4
CLOUD_METRICS_AWS_LOOKBACK_MINUTES=15
CLOUD_METRICS_AWS_MAX_METRICS_PER_ACCOUNT=5000
# Optional comma-separated namespaces (blank = all namespaces)
CLOUD_METRICS_AWS_NAMESPACES=
# Optional comma-separated regions override (blank = per-account/default region)
CLOUD_METRICS_AWS_REGIONS=["us-east-1","us-east-2","us-west-1","us-west-2"]
CLOUD_METRICS_RACKSPACE_CONCURRENCY=4
CLOUD_METRICS_RACKSPACE_PAGE_SIZE=100
CLOUD_METRICS_RACKSPACE_MAX_ENTITIES=5000
CLOUD_METRICS_RACKSPACE_MAX_METRICS_PER_CHECK=50
CLOUD_METRICS_RACKSPACE_LOOKBACK_MINUTES=60
CLOUD_METRICS_RACKSPACE_PLOT_POINTS=30
CLOUD_METRICS_RACKSPACE_TIMEOUT_MS=30000
CLOUD_METRICS_RACKSPACE_MAX_RETRIES=3

# DB backup to S3-compatible storage (hourly + lifecycle retention)
# Env vars override Admin UI backup config values when both are present.
DB_BACKUP_ENABLED=false
DB_BACKUP_BUCKET=
DB_BACKUP_PREFIX=cloudstudio-db-backups
DB_BACKUP_REGION=us-east-1
DB_BACKUP_ENDPOINT=https://s3.wasabisys.com
DB_BACKUP_ACCESS_KEY_ID=
DB_BACKUP_SECRET_ACCESS_KEY=
DB_BACKUP_SESSION_TOKEN=
DB_BACKUP_FORCE_PATH_STYLE=false
DB_BACKUP_INTERVAL_MS=3600000
DB_BACKUP_RUN_ON_STARTUP=true
DB_BACKUP_RETENTION_DAYS=15
DB_BACKUP_APPLY_LIFECYCLE=true
DB_BACKUP_LIFECYCLE_RULE_ID=cloudstudio-db-backup-retention
DB_BACKUP_TMP_DIR=./data/tmp-backups
DB_BACKUP_QUEUE_DIR=./data/tmp-backups/queue
DB_BACKUP_COMPRESS=true
DB_BACKUP_COMPRESSION_LEVEL=6
DB_BACKUP_VERIFY_QUICK_CHECK=true
DB_BACKUP_UPLOAD_MANIFEST=true
DB_BACKUP_RETRY_BATCH_SIZE=3
DB_BACKUP_MAX_QUEUED_FILES=336
